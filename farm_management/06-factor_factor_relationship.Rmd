---
author: Deependra Dhakal
fontsize: 12pt
title: Factor-factor relationship
date: \today
institute:
  - GAASC, Baitadi
  - Tribhuwan University 
output: 
  binb::iqss:
    keep_tex: true
    slide_level: 2
    includes:
      in_header: iqss_beamer_header.tex
classoption: "aspectratio=169"
bibliography: [./../bibliography/bibliographies.bib]
---

```{r setup, include=FALSE}
library(knitr)
require(tidyverse)
set.seed(453)
# invalidate cache when the package version changes
knitr::opts_chunk$set(tidy = FALSE, echo = FALSE, 
                  message = FALSE, warning = FALSE,
                  out.width = "45%", cache = TRUE)
options(knitr.table.format = "latex")
options(knitr.kable.NA = "", digits = 2, knitr.kable.NAN = "")
options(kableExtra.latex.load_packages = FALSE)
source("./../scripts/supply-demand-surplus.R")
source("./../scripts/graphics.R")
# require(extrafont) # requires for graphics.R
# require(extrafontdb)
# extrafont::loadfonts()
# extrafont::font_import()
```

# Introduction

## Background

- Production function or factor-product relationship deals only with one output and one variable input; all other inputs being considered fixed.
- Actually there are many situations where there a large number of inputs which are used to produce a farm commodity.
- The farmers are faced with the problem of deciding about the use of more than one resource or set of resources in substitution of other resources or set of resources.
- For example, it is common problem with the farmer to decide on how much of N, P and K fertilizer to use with a view to getting certain level of a crop output.
- Same problem applies to livestock rearing where how much of concentrates and green foodders to feed the milch animal to get certain amount of milk should be decided.

## Substitution

- There is possibility of substituting one factor ($X_1$) for another ($X_2$) as product level (Y) is held constant.
- Thus objectives of analysis of factor-factor relationship are:
  1. Minimization of cost at a given level of output
  2. Optimization of output to the fixed factors through alternative resource-use combinations
- In context of factor-factor substitution involving only two factors, adding more of a quantity of factor $X_1$ while replacing the amount of $X_2$ is referred to as factor $X_1$ substituting factor $X_2$.

## Example

Let us suppose a farmer is producing wheat with various combinations of two fertilizer inputs -- Nitrogenous fertilizer and Phosphatic fertilizer. At various levels of input combinations, we obtains quanitites of output as shown in Table \ref{tab:np-factor-factor}.

```{r np-factor-factor}
np_factor_factor <- tribble(
  ~"phosphorus", ~"nitrogen", ~"yield",
  40, 40, 40.21,
  40, 60, 43.09,
  40, 80, 44.74,
  40, 100, 45.15,
  40, 120, 44.32, 
  40, 140, 44.02,
  60, 40, 41.87,
  60, 60, 45.51,
  60, 80, 47.90,
  60, 100, 49.06,
  60, 120, 48.98, 
  60, 140, 48.32,
  80, 40, 40.89,
  80, 60, 45.28,
  80, 80, 48.43,
  80, 100, 50.35,
  80, 120, 51.02, 
  80, 140, 50.54
)

np_factor_factor %>% 
  pivot_wider(id_cols = c(phosphorus, nitrogen), names_from = "nitrogen", values_from = "yield", names_prefix = "nitrogen_") %>% 
  rename_all(function(x)str_replace_all(x, "_", " ")) %>% 
  knitr::kable(caption = "Combination of inputs resulting in different levels of output.", booktabs = TRUE) %>% 
  kableExtra::kable_styling(font_size = 6, latex_options = "striped")
```

## Isoquant or iso-product curve

- An isoquant curve represents the various input combinations that can be used to produce a given output.
- Each point on an isoquant is the maximum output that can be produced with these input combinations.

For example, suppose 80, 108 and 120 units of output (yield of wheat per ropani of land) can be produced using the following input combinations (nitrogen ($X_1$) and phosphorus ($X_2$) fertilizer in kg per ropani):

##

```{r np-factor-factor-output, fig.align='center', fig.cap="Isoquant curves showing combination of various level of inputs to produce different level of outputs", fig.width=4, fig.height=3, out.width="40%"}
np_ff_output <- tribble(
  ~"yield", ~"nitrogen", ~"phosphorus",
  "80 kg", 8, 0,
  "80 kg", 5, 1,
  "80 kg", 3, 4, 
  "80 kg", 2, 6, 
  "80 kg", 3, 9,
  "108 kg", 9, 2,
  "108 kg", 6, 3,
  "108 kg", 5, 4,
  "108 kg", 4, 7,
  "108 kg", 5, 10,
  "120 kg", 10, 3.5,
  "120 kg", 9, 3.6,
  "120 kg", 6, 5.5
)

# bezier fitting
np_ff_output %>% 
  group_by(yield) %>% 
  summarize(bezier_extrapolated = list(as_tibble(Hmisc::bezier(nitrogen, phosphorus, xlim = 8, evaluation = 1000)) %>% 
              rename(nitrogen = x, phosphorus = y))) %>% 
  unnest(bezier_extrapolated) %>% 
  ungroup() %>% 
  # filter(yield == "108 kg") %>%
  ggplot(aes(x = nitrogen, y = phosphorus, group = yield, color = yield)) +
  # geom_point(data = np_ff_output, mapping = aes(x = nitrogen, y = phosphorus)) +
  geom_path(linejoin = "round") +
  theme_bw()

# # spline and gam fitting are useless
# # spline fitting
# np_ff_output %>% 
#   group_by(yield) %>% 
#   summarize(bezier_extrapolated = list(as_tibble(spline(nitrogen, phosphorus, n = 20, 
#                                                         method = "fmm", ties = "mean")) %>% 
#                                          rename(nitrogen = x, phosphorus = y))) %>% 
#   unnest(bezier_extrapolated) %>% 
#   ungroup() %>%
#   # filter(yield == "108 kg") %>%
#   ggplot(aes(x = nitrogen, y = phosphorus, group = yield, color = yield)) +
#   geom_point(data = np_ff_output, mapping = aes(x = nitrogen, y = phosphorus)) +
#   geom_path(linejoin = "round") +
#   theme_bw()
# 
# # gam fitting
# np_ff_output %>% 
#   group_by(yield) %>% 
#   ggplot(aes(x = nitrogen, y = phosphorus, group = yield, color = yield)) +
#   geom_point(data = np_ff_output, mapping = aes(x = nitrogen, y = phosphorus)) +
#   stat_smooth(
#               formula = y ~ s(x, k = 3), method = "gam", se = FALSE) +
#   # geom_path(linejoin = "round") +
#   theme_bw()
# 

# xspline
require(ggforce)
require(ggalt)
np_ff_output %>% 
  group_by(yield) %>% 
  ggplot(aes(x = nitrogen, y = phosphorus, group = yield, color = yield)) +
  geom_point() +
  stat_xspline(geom = "path", spline_shape = .4) +
  # geom_path(linejoin = "round") +
  theme_bw()

```

- Isoquants can be traced to different level of outputs. We can imagine that there is an insoquant for every output level between and including lowest and highest production level.
- The Figure \ref{fig:np-factor-factor-output} shows the isoquant map of three isoquant curves.

# Types of factor-factor relationships

##

- The shapes of the isoquants and production surface will depend upon the manner in which the variable inputs are combined to produce a particular level of output.
- There can be 3 categories of such combinations of inputs:
  1. Fixed proportion combination of inputs
  2. Constant rate of substitution, and
  3. Varying rates of substitution

## Fixed proportion combination

- There are certain enterprises or products which can only be produced if inputs are added in fixed proportion at all levels of production.
- In this case there is no decision problem because the inputs combine in fixed proportion.
- An example situation is that of tractor-driver combination. Adding another tractor will necessitate addition of a driver too.
- Inputs combining in fixed proportions give rise to L-shaped isoquants.

```{r fixed-proportion}
tribble(
  ~"yield", ~"tractor", ~"driver",
  "2 tons", 1, 1, 
  "3 tons", 3, 3,
  "4 tons", 4, 4
) %>% 
  knitr::kable(booktabs = TRUE) %>% 
  kableExtra::kable_styling(latex_options = "striped")
```


##

#### Marginal rate of substitution

The rate at which two inputs can be substituted at a given level of output called MRS.
It is denoted as: $\frac{\Delta X_2}{\Delta X_1}$.

## Constant rate of substitution

- The substitution at constant rate occurs when the amount of one input replaced by the other point does not change as the added input increases in magnitude.
- The isoquant of such combination is a straight line.
- For inputs which can be exchanged at a constant rate, the slope of the product contour is constant, or in other words, the substitution ratio remains same.

$$
\frac{\Delta X_{21}}{\Delta X_{11}} = \frac{\Delta X_{22}}{\Delta X_{12}} = \frac{\Delta X_{23}}{\Delta X_{13}} = ... = \frac{\Delta X_{2n}}{\Delta X_{1n}}
$$

##

```{r constant-rate-of-substitution}
tribble(
  ~"yield", ~"women_labor", ~"men_labor", 
  "2 tons", 10, 1,
  "2 tons", 8, 2,
  "2 tons", 6, 3,
  "2 tons", 4, 4,
  "2 tons", 2, 5
) %>% 
  rename_all(function(x)str_replace_all(x, "_", " ")) %>% 
  knitr::kable(booktabs = TRUE) %>% 
  kableExtra::kable_styling(latex_options = "striped")
```


## Varying rate of substitution

- There can be increasing rate of substitution on decreasing rate of substitution. It can also be the case that MRS changes from increasing initially to decreasing finally and vice versa.
- Substitution at increasing rate is rarely available in agriculture, but the substitution at decreasing rate is more common in agriculture.
- Decreasing rate of substitution means that every subsequent increase in the use of one factor replaces less and less of the other.
- Examples are substitution among concentrates and green fodder, labour and capital, and nitrogen and phosphorus, etc.

##

```{r varying-rate-of-substitution}
tribble(
  ~"yield", ~"nitrogen", ~"phosphorus", 
  "2 tons", 46, 0,
  "2 tons", 32, 2,
  "2 tons", 20, 4,
  "2 tons", 10, 6,
  "2 tons", 1, 8,
  "2 tons", 0, 10
) %>% 
  mutate(delta_n_x2 = tsibble::difference(nitrogen, 1, 1), 
         delta_n_x1 = tsibble::difference(phosphorus, 1, 1), 
         mrs_x2_x1 = abs(delta_n_x2/delta_n_x1)) %>% 
  knitr::kable(booktabs = TRUE, 
               col.names = c("Yield", "Nitrogen ($X_2$)", "Phosphorus ($X_1$)", 
                             "$\\Delta X_2$", 
                             "$\\Delta X_1$", 
                             "MRS ($\\frac{\\Delta X_2}{\\Delta X_1}$)"
                             ), 
               escape = FALSE) %>% 
  kableExtra::kable_styling(latex_options = "striped")
```


# Bibliography

## For more information
